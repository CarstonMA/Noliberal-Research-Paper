"0","# Manually assign ISO3 codes for Kosovo and Micronesia **before merging**"
"0","manual_iso3 <- c("
"0","  ""kosovo"" = ""XKX"",      # Kosovo's ISO3 code"
"0","  ""micronesia"" = ""FSM""   # Micronesia's ISO3 code"
"0",")"
"0",""
"0","heritage <- heritage %>%"
"0","  mutate(ISO3 = ifelse(Country %in% names(manual_iso3), manual_iso3[Country], "
"0","                       countrycode(Country, ""country.name"", ""iso3c"")))"
"2","Warning: [38;5;232mThere was 1 warning in `mutate()`.[39m
[38;5;232m[36mâ„¹[38;5;232m In argument: `ISO3 = ifelse(...)`.[39m
Caused by warning:
[33m![39m Some values were not matched unambiguously: kosovo, micronesia"
"0","fraser_aggregate <- fraser_aggregate %>%"
"0","  mutate(ISO3 = ifelse(Country %in% names(manual_iso3), manual_iso3[Country], "
"0","                       countrycode(Country, ""country.name"", ""iso3c"")))"
"0",""
"0","# Merge using standardized ISO3 codes"
"0","merged_data <- full_join(heritage, fraser_aggregate, by = c(""ISO3"", ""Year""))"
"0",""
"0","# Ensure Fraser's country names are used unless NA"
"0","merged_data <- merged_data %>%"
"0","  mutate(Country = coalesce(Country.y, Country.x)) %>%  # Use Fraser's names unless NA"
"0","  select(ISO3, Country, Year, everything(), -Country.x, -Country.y)  # Reorder columns"
"0",""
